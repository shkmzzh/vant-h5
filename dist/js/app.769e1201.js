(function(){"use strict";var t={8670:function(t,e,a){var s=a(6369),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],r={methods:{}},o=r,l=a(3736),c=(0,l.Z)(o,i,n,!1,null,null,null),u=c.exports,h=a(2631),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-login"},[e("van-form",{ref:"form"},[e("van-nav-bar",{attrs:{title:"面经登录"}}),e("van-field",{attrs:{label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请输入用户名",trigger:"onChange"},{pattern:/^\w{4,12}$/,message:"请输入4-12位用户名",trigger:"onChange"}]},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),e("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请输入用户名",trigger:"onChange"},{pattern:/^\w{6,12}$/,message:"请输入6-12位密码",trigger:"onChange"}]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("van-button",{attrs:{block:"",type:"default"},on:{click:t.submit}},[t._v("提交")]),e("p",{staticClass:"register"},[e("router-link",{attrs:{to:"/register"}},[t._v("注册账号")])],1)],1)},f=[],p=(a(7658),a(1062),a(272)),m=a(70);const g="token",v=t=>{localStorage.setItem(g,t)},b=()=>localStorage.getItem(g),k=()=>{localStorage.removeItem(g)},_=m.ZP.create({baseURL:"http://interview-api-t.itheima.net"});_.interceptors.request.use((t=>(console.log("请求拦截",t),t.headers.Authorization=`Bearer ${b()}`,t)),(t=>Promise.reject(t))),_.interceptors.response.use((t=>(console.log("响应拦截的res",t),t.data)),(t=>(console.log("error"),console.dir(t),console.log(t.response.data.message),t.response&&t.response.data.message&&(p.Z.fail(t.response.data.message),k(),jt.push("/login")),Promise.reject(t))));var w=_;const y=t=>w({method:"POST",url:"/h5/user/register",data:t}),Z=t=>w({method:"POST",url:"/h5/user/login",data:t}),C=()=>w({method:"GET",url:"/h5/user/currentUser"});var x={data(){return{form:{username:"",password:""}}},methods:{submit(){this.$refs.form.validate().then((async()=>{console.log("验证成功");const t=await Z(this.form);console.log(t),console.log(t.data.token),v(t.data.token),this.$router.push("/article"),console.log(b())})).catch((t=>{console.log("验证失败"+t)}))}}},P=x,$=(0,l.Z)(P,d,f,!1,null,"777d0520",null),q=$.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-login"},[e("van-form",{ref:"form"},[e("van-nav-bar",{attrs:{title:"面经注册"}}),e("van-field",{attrs:{label:"用户名",placeholder:"请输入用户名",rules:t.rules.username},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),e("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",rules:t.rules.username},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("van-button",{attrs:{block:""},on:{click:t.submit}},[t._v("注册")]),e("p",{staticClass:"register"},[e("router-link",{attrs:{to:"/login"}},[t._v("已有账号?去登录")])],1)],1)},O=[],j={data(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"onChange"},{pattern:/^\w{4,12}$/,message:"请输入4-12位用户名",trigger:"onChange"}],password:[{required:!0,message:"请输入用户名",trigger:"onChange"},{pattern:/^\w{6,12}$/,message:"请输入6-12位密码",trigger:"onChange"}]}}},methods:{submit(){this.$refs.form.validate().then((async()=>{await y(this.form),console.log(this.form),this.$router.push("/login")})).catch((()=>{console.log("验证失败")}))}}},I=j,S=(0,l.Z)(I,T,O,!1,null,"2937c207",null),F=S.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-page"},[e("van-nav-bar",{attrs:{"left-text":"返回",fixed:"",title:"面经详细"},on:{"click-left":function(e){return t.$router.push(t.back)}}}),e("header",{staticClass:"header"},[e("h1",[t._v(t._s(t.info.stem))]),e("p",[t._v(t._s(t.info.creator)+" | "+t._s(t.info.view)+" 浏览量 | "+t._s(t.info.likeCount)+" 点赞数")]),e("p",[e("img",{attrs:{src:t.info.avatar,alt:""}}),e("span",[t._v(t._s(t.info.creator))])])]),e("main",{staticClass:"body",domProps:{innerHTML:t._s(t.info.content)}}),e("div",{staticClass:"opt"},[e("van-icon",{class:{active:1===this.info.likeFlag},attrs:{name:"like-o"},on:{click:t.likeClick}}),e("van-icon",{class:{active:1===this.info.collectFlag},attrs:{name:"star-o"},on:{click:t.likeCollect}})],1)],1)},A=[];const E=t=>w({method:"GET",url:"/h5/interview/show",params:{id:t}}),z=t=>w({method:"POST",url:"/h5/interview/opt",data:t});var G={name:"detail-page",data(){return{id:this.$route.query.id,back:this.$route.query.back,info:""}},created(){this.getInterview()},methods:{async getInterview(){const t=await E(this.id);this.info=t.data,console.log(this.info)},async likeClick(){await z({id:this.id,optType:1}),this.info.likeFlag=1-this.info.likeFlag,this.$toast.success(this.info.likeFlag?"感谢你的喜欢":"你干嘛,哎呦!")},async likeCollect(){await z({id:this.id,optType:2}),this.info.collectFlag=1-this.info.collectFlag,this.$toast.success(this.info.collectFlag?"收藏成功":"你干嘛,哎呦!")}}},L=G,M=(0,l.Z)(L,D,A,!1,null,"f31cbe12",null),H=M.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-page"},[e("router-view"),e("van-tabbar",{attrs:{route:""}},[e("van-tabbar-item",{attrs:{to:"/article",icon:"notes-o"}},[t._v("面经")]),e("van-tabbar-item",{attrs:{to:"/collect",icon:"star-o"}},[t._v("收藏")]),e("van-tabbar-item",{attrs:{to:"/like",icon:"like-o"}},[t._v("喜欢")]),e("van-tabbar-item",{attrs:{to:"/user",icon:"user-o"}},[t._v("我的")])],1)],1)},B=[],R={},J=R,K=(0,l.Z)(J,U,B,!1,null,null,null),N=K.exports,Q=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"喜欢",fixed:"",placeholder:""}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return e("ArticleItem",{key:t.id,attrs:{item:t}})})),1)],1)},V=[];const W=t=>w({method:"GET",url:"/h5/interview/opt/list",params:t});var X={data(){return{loading:!1,finished:!1,list:[],query:{optType:1,pageSize:10,page:1}}},methods:{async getData(){const t=await W(this.query);console.log(t),this.loading=!1,this.list.push(...t.data.rows),this.page++,this.list.length===t.data.total&&(this.finished=!0)}}},Y=X,tt=(0,l.Z)(Y,Q,V,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-page"},[e("nav",{staticClass:"my-nav van-hairline--bottom"},[e("a",{class:{active:"weight_desc"===t.query.sorter},attrs:{href:"javascript:;"},on:{click:function(e){return t.aClick("weight_desc")}}},[t._v("推荐")]),e("a",{class:{active:null===t.query.sorter},attrs:{href:"javascript:;"},on:{click:function(e){return t.aClick(null)}}},[t._v("最新")]),t._m(0)]),t.bol?e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return e("ArticleItem",{key:t.id,attrs:{item:t}})})),1):t._e()],1)},st=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:"http://www.dongh5.com/vue-vant-h5/img/logo.dbd40807.png",alt:""}})])}],it=function(){var t=this,e=t._self._c;return e("van-cell",{staticClass:"article-item",on:{click:t.cellClick},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"head"},[e("img",{attrs:{src:t.item.avatar,alt:""}}),e("div",{staticClass:"con"},[e("p",{staticClass:"title van-ellipsis"},[t._v(t._s(t.item.stem))]),e("p",{staticClass:"other"},[t._v(t._s(t.item.creator)+" | "+t._s(t.item.createdAt))])])])]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"body van-multi-ellipsis--l2",domProps:{innerHTML:t._s(t.item.content)}}),e("div",{staticClass:"foot"},[t._v("点赞 "+t._s(t.item.likeCount)+" | 浏览 "+t._s(t.item.views))])]},proxy:!0}])})},nt=[],rt={name:"ArticleItem",props:{item:{type:Object}},methods:{cellClick(){this.$router.push("/detail?id="+this.item.id+"&back="+this.$route.path)}}},ot=rt,lt=(0,l.Z)(ot,it,nt,!1,null,"f74820c2",null),ct=lt.exports;const ut=t=>w({method:"GET",url:"/h5/interview/query",params:t});var ht={name:"article-page",components:{ArticleItem:ct},data(){return{query:{current:1,pageSize:10,sorter:"weight_desc"},list:[],loading:!1,finished:!1,bol:!0}},created(){},methods:{async getData(){const t=await ut(this.query);console.log(t.data),this.loading=!1,this.list.push(...t.data.rows),this.query.current++,this.list.length>=t.data.total&&(this.finished=!0)},aClick(t){this.query.sorter=t,this.loading=!1,this.finished=!1,this.query.current=1,this.list=[],this.bol=!1,this.$nextTick((()=>{this.bol=!0}))}}},dt=ht,ft=(0,l.Z)(dt,at,st,!1,null,"5e899bd6",null),pt=ft.exports,mt=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"收藏",fixed:"",placeholder:""}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return e("ArticleItem",{key:t.id,attrs:{item:t}})})),1)],1)},gt=[],vt={data(){return{loading:!1,finished:!1,list:[],query:{optType:2,pageSize:10,page:1}}},methods:{async getData(){const t=await W(this.query);console.log(t),this.loading=!1,this.list.push(...t.data.rows),this.page++,this.list.length===t.data.total&&(this.finished=!0)}}},bt=vt,kt=(0,l.Z)(bt,mt,gt,!1,null,null,null),_t=kt.exports,wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-page"},[e("div",{staticClass:"user"},[e("img",{attrs:{src:t.info.avatar,alt:""}}),e("h3",[t._v(t._s(t.info.username))])]),e("van-grid",{attrs:{clickable:"","column-num":3,border:!1}},[e("van-grid-item",{attrs:{icon:"clock-o",text:"历史记录",to:"/"}}),e("van-grid-item",{attrs:{icon:"bookmark-o",text:"我的收藏",to:"/collect"}}),e("van-grid-item",{attrs:{icon:"thumb-circle-o",text:"我的点赞",to:"/like"}})],1),e("van-cell-group",{staticClass:"mt20"},[e("van-cell",{attrs:{title:"推荐分享","is-link":""}}),e("van-cell",{attrs:{title:"意见反馈","is-link":""}}),e("van-cell",{attrs:{title:"关于我们","is-link":""}}),e("van-cell",{attrs:{title:"退出登录","is-link":""},on:{click:t.logout}})],1)],1)},yt=[],Zt={name:"user-page",data(){return{info:""}},created(){this.getData()},methods:{async getData(){const t=await C();console.log(t),this.info=t.data},logout(){k(),this.$router.push("./login")}}},Ct=Zt,xt=(0,l.Z)(Ct,wt,yt,!1,null,"25e32214",null),Pt=xt.exports;s.ZP.use(h.ZP);const $t=[{path:"/login",component:q},{path:"/register",component:F},{path:"/detail",component:H},{path:"/",component:N,children:[{path:"/",redirect:"/article"},{path:"/article",component:pt},{path:"/like",component:et},{path:"/collect",component:_t},{path:"/user",component:Pt}]}],qt=new h.ZP({routes:$t}),Tt=["/login","/register"];qt.beforeEach(((t,e,a)=>{console.log("to",t),console.log("from",e),b()||Tt.includes(t.path.toLowerCase())?a():a("/login")}));const Ot=h.ZP.prototype.push;h.ZP.prototype.push=function(t){return Ot.call(this,t).catch((t=>t))};var jt=qt,It=(a(2406),a(9864)),St=(a(2210),a(4159)),Ft=(a(2685),a(7165)),Dt=(a(7983),a(3838)),At=(a(9578),a(6631)),Et=(a(3970),a(140)),zt=(a(289),a(3142)),Gt=(a(3255),a(797)),Lt=(a(4809),a(9858)),Mt=(a(5603),a(4398)),Ht=(a(3096),a(2628)),Ut=(a(4072),a(9245));s.ZP.use(Ut.Z),s.ZP.use(Ht.Z),s.ZP.use(Mt.Z),s.ZP.use(Lt.Z),s.ZP.use(Gt.Z),s.ZP.use(zt.Z),s.ZP.use(Et.Z),s.ZP.use(p.Z),s.ZP.use(At.Z),s.ZP.use(Dt.Z),s.ZP.use(Ft.Z),s.ZP.use(St.Z),s.ZP.use(It.Z),s.ZP.component(ct.name,ct),s.ZP.config.productionTip=!1,new s.ZP({router:jt,render:t=>t(u)}).$mount("#app")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,n){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],n=t[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[s,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var u=l(a)}for(e&&e(s);c<r.length;c++)n=r[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},s=self["webpackChunkhm_vant_h5"]=self["webpackChunkhm_vant_h5"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8670)}));s=a.O(s)})();
//# sourceMappingURL=app.769e1201.js.map